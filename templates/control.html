<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='assets/js/controller.js') }}"></script>

<script>
    $(function() {
    if ("WebSocket" in window) {
        ws = new WebSocket("ws://" + document.domain + ":{{port}}/websocket");
        ws.onmessage = function (msg) {
            var message = JSON.parse(msg.data);
            $("p#log").html(message.output);
        };
    };
    $('input[name=text]').on('keyup', function(e){
        e.preventDefault();
        var message = $(this).val();
        console.log(message);
        ws.send(JSON.stringify({'output': message}));
    });
    $('input[name=text]').focus();
    window.onbeforeunload = function() {
        ws.onclose = function () {};
        ws.close()
    };
});
</script>
<style>
input {
    font-size: 48px; 
    width: 600px;
    border-style: none; 
    background-color: transparent; 
    border-style: solid; 
    border-width: 0px 0px 1px 0px; 
}
textarea:focus, input:focus{
    outline: 0;
}
</style>

{% extends "control-base.html" %}


{% block subtitle %}- Control{% endblock %}

{% block nav %}
{% endblock %}

{% block content %}

<h2 id="signupmain"> Roomba as a Service.
</h2>

<h3> WASD </h3>

Current Control: <span id="currentKey"> </span>

<input type="text" name="text"  />
<p id="log"></p>

{% endblock %}